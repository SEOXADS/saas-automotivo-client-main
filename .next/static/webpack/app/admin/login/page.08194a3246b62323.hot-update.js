"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/login/page",{

/***/ "(app-pages-browser)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canManage: () => (/* binding */ canManage),\n/* harmony export */   getAuthToken: () => (/* binding */ getAuthToken),\n/* harmony export */   getTenantSubdomain: () => (/* binding */ getTenantSubdomain),\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   initializeAuthFromCookies: () => (/* binding */ initializeAuthFromCookies),\n/* harmony export */   isAdmin: () => (/* binding */ isAdmin),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zustand */ \"(app-pages-browser)/./node_modules/zustand/esm/react.mjs\");\n/* harmony import */ var zustand_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zustand/middleware */ \"(app-pages-browser)/./node_modules/zustand/esm/middleware.mjs\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-cookie */ \"(app-pages-browser)/./node_modules/js-cookie/dist/js.cookie.mjs\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api */ \"(app-pages-browser)/./lib/api.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n\n\n\n\nconst useAuth = (0,zustand__WEBPACK_IMPORTED_MODULE_2__.create)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_3__.persist)((set, get)=>({\n        // Estado inicial\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        isLoading: false,\n        error: null,\n        // AÃ§Ãµes\n        login: async (email, password, subdomain)=>{\n            console.log('ðŸ” Auth: Iniciando processo de login...', {\n                email,\n                subdomain\n            });\n            set({\n                isLoading: true,\n                error: null\n            });\n            try {\n                // Verificar se Ã© login de demonstraÃ§Ã£o\n                if (email === 'admin@demo.com' && password === 'password' && subdomain === 'demo') {\n                    console.log('ðŸŽ­ Auth: Detectado login de demonstraÃ§Ã£o');\n                    // Processar login de demonstraÃ§Ã£o\n                    const demoUserData = {\n                        id: 1,\n                        name: 'Administrador Demo',\n                        email: 'admin@demo.com',\n                        role: 'admin',\n                        is_active: true,\n                        tenant_id: 1,\n                        tenant: {\n                            id: 1,\n                            name: 'Empresa Demo',\n                            subdomain: 'demo',\n                            plan: 'premium',\n                            status: 'active'\n                        }\n                    };\n                    localStorage.setItem('demo_user', JSON.stringify(demoUserData));\n                    localStorage.setItem('demo_token', 'demo_token_123');\n                    localStorage.setItem('demo_subdomain', 'demo');\n                    js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', 'demo_token_123', {\n                        expires: 7\n                    });\n                    js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', 'demo', {\n                        expires: 7\n                    });\n                    set({\n                        user: demoUserData,\n                        token: 'demo_token_123',\n                        isAuthenticated: true,\n                        isLoading: false,\n                        error: null\n                    });\n                    console.log('âœ… Auth: Login de demonstraÃ§Ã£o realizado com sucesso');\n                    return;\n                }\n                // ðŸ”¥ SET SUBDOMAIN COOKIE BEFORE API CALL\n                console.log('ðŸŒ Auth: Definindo subdomain antes da requisiÃ§Ã£o...');\n                js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', subdomain, {\n                    expires: 7\n                });\n                console.log('âœ… Auth: Subdomain definido:', subdomain);\n                // Tentar login real com API do SaaS\n                console.log('ðŸŒ Auth: Tentando login real com API do SaaS...');\n                try {\n                    var _currentState_user;\n                    const data = await (0,_api__WEBPACK_IMPORTED_MODULE_1__.apiPost)('/tenant/login', {\n                        email,\n                        password\n                    });\n                    console.log('âœ… Auth: Login real realizado com sucesso!');\n                    console.log('ðŸ“¦ Auth: Dados recebidos:', {\n                        token: data.access_token ? \"\".concat(data.access_token.substring(0, 20), \"...\") : 'null',\n                        user: data.user ? {\n                            id: data.user.id,\n                            email: data.user.email,\n                            role: data.user.role\n                        } : 'null'\n                    });\n                    // Processar login real\n                    let mappedUser;\n                    if (data.user && data.user.tenant) {\n                        mappedUser = data.user;\n                        console.log('âœ… Auth: UsuÃ¡rio com tenant completo:', mappedUser.email);\n                    } else if (data.user && data.user.tenant_id) {\n                        mappedUser = {\n                            ...data.user,\n                            tenant: {\n                                id: data.user.tenant_id,\n                                name: 'Empresa',\n                                subdomain: subdomain,\n                                plan: 'basic',\n                                status: 'active'\n                            }\n                        };\n                        console.log('âœ… Auth: UsuÃ¡rio com tenant_id, criado tenant:', mappedUser.email);\n                    } else {\n                        mappedUser = {\n                            ...data.user,\n                            tenant_id: 1,\n                            tenant: {\n                                id: 1,\n                                name: 'Empresa',\n                                subdomain: subdomain,\n                                plan: 'basic',\n                                status: 'active'\n                            }\n                        };\n                        console.log('âœ… Auth: UsuÃ¡rio sem tenant, criado tenant padrÃ£o:', mappedUser.email);\n                    }\n                    console.log('ðŸ”‘ Auth: Configurando cookies...');\n                    js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', data.access_token, {\n                        expires: 7\n                    });\n                    js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', subdomain, {\n                        expires: 7\n                    });\n                    console.log('âœ… Auth: Cookies configurados');\n                    console.log('ðŸ’¾ Auth: Configurando estado do Zustand...');\n                    set({\n                        user: mappedUser,\n                        token: data.access_token,\n                        isAuthenticated: true,\n                        isLoading: false,\n                        error: null\n                    });\n                    console.log('âœ… Auth: Estado do Zustand configurado');\n                    console.log('ðŸ” Auth: Verificando estado apÃ³s configuraÃ§Ã£o...');\n                    const currentState = get();\n                    console.log('ðŸ“Š Auth: Estado atual:', {\n                        isAuthenticated: currentState.isAuthenticated,\n                        user: (_currentState_user = currentState.user) === null || _currentState_user === void 0 ? void 0 : _currentState_user.email,\n                        token: currentState.token ? \"\".concat(currentState.token.substring(0, 20), \"...\") : 'null'\n                    });\n                    console.log('âœ… Auth: Login real processado com sucesso');\n                    return;\n                } catch (error) {\n                    console.log('âš ï¸ Auth: API retornou erro:', error);\n                    // Verificar se Ã© erro de tenant nÃ£o encontrado\n                    if (error instanceof Error && error.message.includes('Tenant nÃ£o encontrado')) {\n                        throw new Error('Este subdomÃ­nio nÃ£o estÃ¡ cadastrado no sistema. Entre em contato com o administrador.');\n                    }\n                    // Para outros erros, usar fallback apenas se for erro de servidor\n                    if (error instanceof Error && (error.message.includes('500') || error.message.includes('Internal Server Error'))) {\n                        console.log('ðŸŽ­ Auth: Usando fallback para erro de servidor...');\n                        const fallbackUser = {\n                            id: Date.now(),\n                            name: email.split('@')[0],\n                            email,\n                            role: 'admin',\n                            is_active: true,\n                            tenant_id: 1,\n                            tenant: {\n                                id: 1,\n                                name: \"Empresa \".concat(subdomain),\n                                subdomain,\n                                plan: 'basic',\n                                status: 'active'\n                            }\n                        };\n                        const fallbackToken = \"fallback_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n                        localStorage.setItem('fallback_user', JSON.stringify(fallbackUser));\n                        localStorage.setItem('fallback_token', fallbackToken);\n                        localStorage.setItem('fallback_subdomain', subdomain);\n                        js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', fallbackToken, {\n                            expires: 7\n                        });\n                        js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', subdomain, {\n                            expires: 7\n                        });\n                        console.log('ðŸ” getTenantSubdomain debug:', {\n                            hostname: window.location.hostname,\n                            parts: window.location.hostname.split('.'),\n                            storedSubdomain: localStorage.getItem('tenant_subdomain'),\n                            envSubdomain: process.env.NEXT_PUBLIC_TENANT_SUBDOMAIN\n                        });\n                        set({\n                            user: fallbackUser,\n                            token: fallbackToken,\n                            isAuthenticated: true,\n                            isLoading: false,\n                            error: null\n                        });\n                        console.log('âœ… Auth: Login com fallback realizado com sucesso');\n                        return;\n                    }\n                    // Para outros erros, re-throw\n                    throw error;\n                }\n            } catch (error) {\n                console.error('âŒ Auth: Erro no processo de login:', error);\n                let errorMessage = 'Erro desconhecido no login';\n                if (error instanceof Error) {\n                    errorMessage = error.message;\n                } else if (typeof error === 'string') {\n                    errorMessage = error;\n                } else if (error && typeof error === 'object' && 'message' in error) {\n                    errorMessage = String(error.message);\n                }\n                if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n                    errorMessage = 'Servidor temporariamente indisponÃ­vel. Tente novamente em alguns minutos.';\n                } else if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n                    errorMessage = 'Credenciais invÃ¡lidas. Verifique seu email, senha e subdomÃ­nio.';\n                } else if (errorMessage.includes('403') || errorMessage.includes('Forbidden')) {\n                    errorMessage = 'Acesso negado. Verifique suas permissÃµes.';\n                }\n                set({\n                    error: errorMessage,\n                    isLoading: false\n                });\n                throw new Error(errorMessage);\n            }\n        },\n        logout: async ()=>{\n            console.log('ðŸšª Auth: Fazendo logout...');\n            try {\n                // Tentar fazer logout na API se nÃ£o estiver em modo demo\n                const token = get().token;\n                if (token && token !== 'demo_token_123') {\n                    console.log('ðŸŒ Auth: Tentando logout na API...');\n                    await (0,_api__WEBPACK_IMPORTED_MODULE_1__.apiLogout)();\n                    console.log('âœ… Auth: Logout na API realizado com sucesso');\n                } else {\n                    console.log('ðŸŽ­ Auth: Modo demo, pulando logout na API');\n                }\n            } catch (error) {\n                console.warn('âš ï¸ Auth: Erro no logout da API, continuando com logout local:', error);\n            }\n            // Remover cookies\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove('auth_token');\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove('tenant_subdomain');\n            // Limpar localStorage de demonstraÃ§Ã£o\n            localStorage.removeItem('demo_user');\n            localStorage.removeItem('demo_token');\n            localStorage.removeItem('demo_subdomain');\n            // Limpar estado\n            set({\n                user: null,\n                token: null,\n                isAuthenticated: false,\n                error: null\n            });\n            console.log('âœ… Auth: Logout realizado com sucesso');\n        },\n        setUser: (user)=>{\n            console.log('ðŸ‘¤ Auth: Definindo usuÃ¡rio:', user.email);\n            set({\n                user,\n                isAuthenticated: true\n            });\n        },\n        setToken: (token)=>{\n            console.log('ðŸ”‘ Auth: Definindo token');\n            set({\n                token\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', token, {\n                expires: 7\n            });\n        },\n        clearError: ()=>{\n            set({\n                error: null\n            });\n        },\n        refreshUser: async ()=>{\n            const { token } = get();\n            if (!token) return;\n            try {\n                const data = await (0,_api__WEBPACK_IMPORTED_MODULE_1__.apiGet)('/tenant/me');\n                set({\n                    user: data.user\n                });\n            } catch (error) {\n                console.error('Erro ao atualizar usuÃ¡rio:', error);\n                // Se der erro 401, fazer logout\n                if (error instanceof Error && error.message.includes('401')) {\n                    get().logout();\n                }\n            }\n        },\n        // âœ… NOVO: FunÃ§Ãµes auxiliares para login hÃ­brido\n        handleDemoLogin: async ()=>{\n            console.log('ðŸŽ­ Auth: Processando login de demonstraÃ§Ã£o...');\n            // Verificar se hÃ¡ dados de demonstraÃ§Ã£o no localStorage\n            const demoUser = localStorage.getItem('demo_user');\n            const demoToken = localStorage.getItem('demo_token');\n            const demoSubdomain = localStorage.getItem('demo_subdomain');\n            if (demoUser && demoToken && demoSubdomain) {\n                // Usar dados de demonstraÃ§Ã£o existentes\n                const user = JSON.parse(demoUser);\n                console.log('ðŸ‘¤ Auth: UsuÃ¡rio de demonstraÃ§Ã£o carregado:', user);\n                // Salvar token nos cookies\n                js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', demoToken, {\n                    expires: 7\n                });\n                js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', demoSubdomain, {\n                    expires: 7\n                });\n                set({\n                    user,\n                    token: demoToken,\n                    isAuthenticated: true,\n                    isLoading: false,\n                    error: null\n                });\n                console.log('âœ… Auth: Login de demonstraÃ§Ã£o realizado com sucesso');\n                return;\n            }\n            // Criar dados de demonstraÃ§Ã£o\n            const demoUserData = {\n                id: 1,\n                name: 'Administrador Demo',\n                email: 'admin@demo.com',\n                role: 'admin',\n                is_active: true,\n                tenant_id: 1,\n                tenant: {\n                    id: 1,\n                    name: 'Empresa Demo',\n                    subdomain: 'demo',\n                    plan: 'premium',\n                    status: 'active'\n                }\n            };\n            localStorage.setItem('demo_user', JSON.stringify(demoUserData));\n            localStorage.setItem('demo_token', 'demo_token_123');\n            localStorage.setItem('demo_subdomain', 'demo');\n            // Salvar token nos cookies\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', 'demo_token_123', {\n                expires: 7\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', 'demo', {\n                expires: 7\n            });\n            set({\n                user: demoUserData,\n                token: 'demo_token_123',\n                isAuthenticated: true,\n                isLoading: false,\n                error: null\n            });\n            console.log('âœ… Auth: Dados de demonstraÃ§Ã£o criados e login realizado');\n        },\n        handleRealLogin: async (data, subdomain)=>{\n            console.log('ðŸŒ Auth: Processando login real...');\n            // Mapear e validar o usuÃ¡rio recebido\n            let mappedUser;\n            if (data.user && data.user.tenant) {\n                mappedUser = data.user;\n                console.log('âœ… Auth: UsuÃ¡rio com tenant completo recebido');\n            } else if (data.user && data.user.tenant_id) {\n                mappedUser = {\n                    ...data.user,\n                    tenant: {\n                        id: data.user.tenant_id,\n                        name: 'Empresa',\n                        subdomain: subdomain,\n                        plan: 'basic',\n                        status: 'active'\n                    }\n                };\n            } else {\n                mappedUser = {\n                    ...data.user,\n                    tenant_id: 1,\n                    tenant: {\n                        id: 1,\n                        name: 'Empresa',\n                        subdomain: subdomain,\n                        plan: 'basic',\n                        status: 'active'\n                    }\n                };\n            }\n            // Salvar token nos cookies\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', data.access_token, {\n                expires: 7\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', subdomain, {\n                expires: 7\n            });\n            set({\n                user: mappedUser,\n                token: data.access_token,\n                isAuthenticated: true,\n                isLoading: false,\n                error: null\n            });\n            console.log('âœ… Auth: Login real processado com sucesso');\n        },\n        handleFallbackLogin: async (email, password, subdomain)=>{\n            console.log('ðŸŽ­ Auth: Processando login com fallback...');\n            // Criar usuÃ¡rio temporÃ¡rio para fallback\n            const fallbackUser = {\n                id: Date.now(),\n                name: email.split('@')[0],\n                email,\n                role: 'admin',\n                is_active: true,\n                tenant_id: 1,\n                tenant: {\n                    id: 1,\n                    name: \"Empresa \".concat(subdomain),\n                    subdomain,\n                    plan: 'basic',\n                    status: 'active'\n                }\n            };\n            // Gerar token temporÃ¡rio\n            const fallbackToken = \"fallback_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9));\n            // Salvar dados no localStorage para persistÃªncia\n            localStorage.setItem('fallback_user', JSON.stringify(fallbackUser));\n            localStorage.setItem('fallback_token', fallbackToken);\n            localStorage.setItem('fallback_subdomain', subdomain);\n            // Salvar token nos cookies\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('auth_token', fallbackToken, {\n                expires: 7\n            });\n            js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set('tenant_subdomain', subdomain, {\n                expires: 7\n            });\n            set({\n                user: fallbackUser,\n                token: fallbackToken,\n                isAuthenticated: true,\n                isLoading: false,\n                error: null\n            });\n            console.log('âœ… Auth: Login com fallback realizado com sucesso');\n        },\n        handleLoginError: async (error)=>{\n            console.error('âŒ Auth: Processando erro de login:', error);\n            let errorMessage = 'Erro desconhecido no login';\n            if (error instanceof Error) {\n                errorMessage = error.message;\n            } else if (typeof error === 'string') {\n                errorMessage = error;\n            } else if (error && typeof error === 'object' && 'message' in error) {\n                errorMessage = String(error.message);\n            }\n            // Mensagens mais amigÃ¡veis para erros comuns\n            if (errorMessage.includes('500') || errorMessage.includes('Internal Server Error')) {\n                errorMessage = 'Servidor temporariamente indisponÃ­vel. Tente novamente em alguns minutos.';\n            } else if (errorMessage.includes('401') || errorMessage.includes('Unauthorized')) {\n                errorMessage = 'Credenciais invÃ¡lidas. Verifique seu email, senha e subdomÃ­nio.';\n            } else if (errorMessage.includes('403') || errorMessage.includes('Forbidden')) {\n                errorMessage = 'Acesso negado. Verifique suas permissÃµes.';\n            }\n            set({\n                error: errorMessage,\n                isLoading: false\n            });\n            throw new Error(errorMessage);\n        },\n        // âœ… NOVO: FunÃ§Ã£o para registro de tenant\n        register: async (data)=>{\n            console.log('ðŸ“ Auth: Iniciando registro de tenant...', {\n                email: data.email,\n                subdomain: data.tenant_subdomain\n            });\n            set({\n                isLoading: true,\n                error: null\n            });\n            try {\n                await (0,_api__WEBPACK_IMPORTED_MODULE_1__.apiTenantRegister)(data);\n                console.log('âœ… Auth: Registro realizado com sucesso!');\n                set({\n                    isLoading: false,\n                    error: null\n                });\n            } catch (error) {\n                console.error('âŒ Auth: Erro no registro:', error);\n                let errorMessage = 'Erro desconhecido no registro';\n                if (error instanceof Error) {\n                    errorMessage = error.message;\n                }\n                set({\n                    error: errorMessage,\n                    isLoading: false\n                });\n                throw new Error(errorMessage);\n            }\n        },\n        // âœ… NOVO: FunÃ§Ã£o para esqueci minha senha\n        forgotPassword: async (email, subdomain)=>{\n            console.log('ðŸ”‘ Auth: Iniciando solicitaÃ§Ã£o de reset de senha...', {\n                email,\n                subdomain\n            });\n            set({\n                isLoading: true,\n                error: null\n            });\n            try {\n                await (0,_api__WEBPACK_IMPORTED_MODULE_1__.apiForgotPassword)({\n                    email,\n                    tenant_subdomain: subdomain\n                });\n                console.log('âœ… Auth: SolicitaÃ§Ã£o de reset enviada com sucesso!');\n                set({\n                    isLoading: false,\n                    error: null\n                });\n            } catch (error) {\n                console.error('âŒ Auth: Erro ao solicitar reset de senha:', error);\n                let errorMessage = 'Erro desconhecido ao solicitar reset de senha';\n                if (error instanceof Error) {\n                    errorMessage = error.message;\n                }\n                set({\n                    error: errorMessage,\n                    isLoading: false\n                });\n                throw new Error(errorMessage);\n            }\n        },\n        // âœ… NOVO: FunÃ§Ã£o para resetar senha\n        resetPassword: async (data)=>{\n            console.log('ðŸ”‘ Auth: Iniciando reset de senha...', {\n                email: data.email,\n                subdomain: data.tenant_subdomain\n            });\n            set({\n                isLoading: true,\n                error: null\n            });\n            try {\n                await (0,_api__WEBPACK_IMPORTED_MODULE_1__.apiResetPassword)(data);\n                console.log('âœ… Auth: Senha resetada com sucesso!');\n                set({\n                    isLoading: false,\n                    error: null\n                });\n            } catch (error) {\n                console.error('âŒ Auth: Erro ao resetar senha:', error);\n                let errorMessage = 'Erro desconhecido ao resetar senha';\n                if (error instanceof Error) {\n                    errorMessage = error.message;\n                }\n                set({\n                    error: errorMessage,\n                    isLoading: false\n                });\n                throw new Error(errorMessage);\n            }\n        }\n    }), {\n    name: 'auth-storage',\n    partialize: (state)=>({\n            user: state.user,\n            token: state.token,\n            isAuthenticated: state.isAuthenticated\n        }),\n    // Adicionar rehydrate para garantir que o estado seja restaurado\n    onRehydrateStorage: ()=>(state)=>{\n            console.log('ðŸ”„ Auth: Estado rehydratado:', state);\n        }\n}));\n// FunÃ§Ã£o para obter o token atual\nconst getAuthToken = ()=>{\n    if (false) {}\n    try {\n        // Try direct token\n        const token = localStorage.getItem('auth_token');\n        if (token) return token;\n        // Try auth-storage (zustand)\n        const authStorage = localStorage.getItem('auth-storage');\n        if (authStorage) {\n            var _parsed_state;\n            const parsed = JSON.parse(authStorage);\n            if (parsed === null || parsed === void 0 ? void 0 : (_parsed_state = parsed.state) === null || _parsed_state === void 0 ? void 0 : _parsed_state.token) {\n                return parsed.state.token;\n            }\n        }\n        // Try cookie\n        const cookies = document.cookie.split(';');\n        for (const cookie of cookies){\n            const [name, value] = cookie.trim().split('=');\n            if (name === 'auth_token') {\n                return value;\n            }\n        }\n    } catch (e) {\n        console.warn('âš ï¸ getAuthToken: Error:', e);\n    }\n    return null;\n};\n// FunÃ§Ã£o para obter o subdomain atual\nconst getTenantSubdomain = ()=>{\n    if (true) {\n        // 1. Try URL extraction first\n        const hostname = window.location.hostname;\n        const parts = hostname.split('.');\n        if (parts.length >= 3) {\n            const subdomain = parts[0];\n            if (![\n                'www',\n                'api',\n                'admin',\n                'localhost'\n            ].includes(subdomain)) {\n                console.log('ðŸŒ getTenantSubdomain: Extracted from URL:', subdomain);\n                return subdomain;\n            }\n        }\n        // 2. Try Cookie (using js-cookie) â† THIS WAS MISSING!\n        const cookieSubdomain = js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('tenant_subdomain');\n        if (cookieSubdomain) {\n            console.log('ðŸª getTenantSubdomain: From cookie:', cookieSubdomain);\n            return cookieSubdomain;\n        }\n        // 3. Try localStorage fallback\n        try {\n            const storedSubdomain = localStorage.getItem('tenant_subdomain');\n            if (storedSubdomain) {\n                console.log('ðŸ’¾ getTenantSubdomain: From localStorage:', storedSubdomain);\n                return storedSubdomain;\n            }\n        } catch (e) {\n            console.warn('âš ï¸ getTenantSubdomain: Error:', e);\n        }\n    }\n    return process.env.NEXT_PUBLIC_TENANT_SUBDOMAIN || '';\n};\n// FunÃ§Ã£o para inicializar o estado de autenticaÃ§Ã£o a partir dos cookies\nconst initializeAuthFromCookies = ()=>{\n    const token = getAuthToken();\n    const subdomain = getTenantSubdomain();\n    console.log('ðŸ” Auth: Inicializando a partir dos cookies:', {\n        token: token ? \"\".concat(token.substring(0, 20), \"...\") : 'null',\n        subdomain,\n        timestamp: new Date().toISOString()\n    });\n    if (token && subdomain) {\n        // Verificar se Ã© token de demonstraÃ§Ã£o\n        if (token === 'demo_token_123') {\n            console.log('ðŸŽ­ Auth: Token de demonstraÃ§Ã£o detectado');\n            const demoUser = localStorage.getItem('demo_user');\n            if (demoUser) {\n                try {\n                    const user = JSON.parse(demoUser);\n                    console.log('ðŸŽ­ Auth: Restaurando usuÃ¡rio de demonstraÃ§Ã£o:', user.email);\n                    // Usar setState diretamente para evitar problemas de timing\n                    useAuth.setState({\n                        user,\n                        token,\n                        isAuthenticated: true,\n                        isLoading: false,\n                        error: null\n                    });\n                    console.log('âœ… Auth: UsuÃ¡rio de demonstraÃ§Ã£o restaurado com sucesso');\n                    return true;\n                } catch (error) {\n                    console.error('âŒ Auth: Erro ao parsear usuÃ¡rio de demonstraÃ§Ã£o:', error);\n                    // Limpar dados corrompidos\n                    localStorage.removeItem('demo_user');\n                    localStorage.removeItem('demo_token');\n                    localStorage.removeItem('demo_subdomain');\n                    js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove('auth_token');\n                    js_cookie__WEBPACK_IMPORTED_MODULE_0__[\"default\"].remove('tenant_subdomain');\n                }\n            }\n        } else {\n            var _currentState_user;\n            // Token real - tentar buscar dados do usuÃ¡rio\n            console.log('ðŸŒ Auth: Token real encontrado, tentando buscar usuÃ¡rio...');\n            console.log('ðŸ” Auth: Token real:', token.substring(0, 20) + '...');\n            console.log('ðŸ” Auth: Subdomain:', subdomain);\n            // Verificar se o token estÃ¡ no estado do Zustand\n            const currentState = useAuth.getState();\n            console.log('ðŸ“Š Auth: Estado atual do Zustand:', {\n                isAuthenticated: currentState.isAuthenticated,\n                user: (_currentState_user = currentState.user) === null || _currentState_user === void 0 ? void 0 : _currentState_user.email,\n                token: currentState.token ? \"\".concat(currentState.token.substring(0, 20), \"...\") : 'null'\n            });\n            // Se jÃ¡ temos usuÃ¡rio e token no estado, considerar autenticado\n            if (currentState.user && currentState.token) {\n                console.log('âœ… Auth: UsuÃ¡rio jÃ¡ estÃ¡ no estado, considerando autenticado');\n                return true;\n            }\n            // NÃ£o fazer refreshUser aqui para evitar loops\n            console.log('âš ï¸ Auth: UsuÃ¡rio nÃ£o encontrado no estado, mas token existe');\n            return true;\n        }\n    }\n    console.log('âŒ Auth: Nenhum token ou subdomain encontrado');\n    return false;\n};\n// FunÃ§Ã£o para verificar se o usuÃ¡rio tem permissÃ£o\nconst hasPermission = (requiredRoles)=>{\n    const { user } = useAuth.getState();\n    return user && requiredRoles.includes(user.role);\n};\n// FunÃ§Ã£o para verificar se Ã© admin\nconst isAdmin = ()=>{\n    const { user } = useAuth.getState();\n    return (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n};\n// FunÃ§Ã£o para verificar se Ã© manager ou admin\nconst canManage = ()=>{\n    const { user } = useAuth.getState();\n    return user && [\n        'admin',\n        'manager'\n    ].includes(user.role);\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ1QsRUFBQztBQUVELG1EQUFtRDtBQUM1QyxNQUFNb0YsZ0JBQWdCLENBQUNDO0lBQzVCLE1BQU0sRUFBRS9GLElBQUksRUFBRSxHQUFHSCxRQUFRZ0csUUFBUTtJQUNqQyxPQUFPN0YsUUFBUStGLGNBQWMvRCxRQUFRLENBQUNoQyxLQUFLYyxJQUFJO0FBQ2pELEVBQUM7QUFFRCxtQ0FBbUM7QUFDNUIsTUFBTWtGLFVBQVU7SUFDckIsTUFBTSxFQUFFaEcsSUFBSSxFQUFFLEdBQUdILFFBQVFnRyxRQUFRO0lBQ2pDLE9BQU83RixDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU1jLElBQUksTUFBSztBQUN4QixFQUFDO0FBRUQsOENBQThDO0FBQ3ZDLE1BQU1tRixZQUFZO0lBQ3ZCLE1BQU0sRUFBRWpHLElBQUksRUFBRSxHQUFHSCxRQUFRZ0csUUFBUTtJQUNqQyxPQUFPN0YsUUFBUTtRQUFDO1FBQVM7S0FBVSxDQUFDZ0MsUUFBUSxDQUFDaEMsS0FBS2MsSUFBSTtBQUN4RCxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvZ2FicmllbGNhcnZhbGhvL0Nsb3VkLURyaXZlL3Nlby1wYXJhL3NhYXMtYXV0b21vdGl2by1jbGllbnQtbWFpbjIvbGliL2F1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnenVzdGFuZCdcbmltcG9ydCB7IHBlcnNpc3QgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnXG5pbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnXG5pbXBvcnQgeyBhcGlQb3N0LCBhcGlHZXQsIGFwaUxvZ291dCwgYXBpVGVuYW50UmVnaXN0ZXIsIGFwaUZvcmdvdFBhc3N3b3JkLCBhcGlSZXNldFBhc3N3b3JkIH0gZnJvbSAnLi9hcGknXG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBudW1iZXJcbiAgbmFtZTogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgcm9sZTogJ2FkbWluJyB8ICdtYW5hZ2VyJyB8ICdzYWxlc3BlcnNvbicgfCAndXNlcidcbiAgcGhvbmU/OiBzdHJpbmdcbiAgYXZhdGFyPzogc3RyaW5nXG4gIGlzX2FjdGl2ZTogYm9vbGVhblxuICBsYXN0X2xvZ2luX2F0Pzogc3RyaW5nXG4gIHRlbmFudF9pZDogbnVtYmVyXG4gIHRlbmFudDoge1xuICAgIGlkOiBudW1iZXJcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBzdWJkb21haW46IHN0cmluZ1xuICAgIHBsYW46ICdiYXNpYycgfCAncHJlbWl1bScgfCAnZW50ZXJwcmlzZSdcbiAgICBzdGF0dXM6ICdhY3RpdmUnIHwgJ2luYWN0aXZlJyB8ICdzdXNwZW5kZWQnXG4gIH1cbn1cblxuLy8gSW50ZXJmYWNlIHBhcmEgcmVzcG9zdGEgZGEgQVBJIChtYWlzIGZsZXjDrXZlbClcbmludGVyZmFjZSBBcGlVc2VyUmVzcG9uc2Uge1xuICBpZDogbnVtYmVyXG4gIG5hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIHJvbGU6ICdhZG1pbicgfCAnbWFuYWdlcicgfCAnc2FsZXNwZXJzb24nIHwgJ3VzZXInXG4gIHBob25lPzogc3RyaW5nXG4gIGF2YXRhcj86IHN0cmluZ1xuICBpc19hY3RpdmU6IGJvb2xlYW5cbiAgbGFzdF9sb2dpbl9hdD86IHN0cmluZ1xuICB0ZW5hbnRfaWQ/OiBudW1iZXJcbiAgdGVuYW50Pzoge1xuICAgIGlkOiBudW1iZXJcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBzdWJkb21haW46IHN0cmluZ1xuICAgIHBsYW46ICdiYXNpYycgfCAncHJlbWl1bScgfCAnZW50ZXJwcmlzZSdcbiAgICBzdGF0dXM6ICdhY3RpdmUnIHwgJ2luYWN0aXZlJyB8ICdzdXNwZW5kZWQnXG4gIH1cbn1cblxuaW50ZXJmYWNlIEF1dGhTdGF0ZSB7XG4gIHVzZXI6IFVzZXIgfCBudWxsXG4gIHRva2VuOiBzdHJpbmcgfCBudWxsXG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhblxuICBpc0xvYWRpbmc6IGJvb2xlYW5cbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbn1cblxuaW50ZXJmYWNlIEF1dGhBY3Rpb25zIHtcbiAgbG9naW46IChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBzdWJkb21haW46IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPlxuICByZWdpc3RlcjogKGRhdGE6IHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICBlbWFpbDogc3RyaW5nXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogc3RyaW5nXG4gICAgdGVuYW50X3N1YmRvbWFpbjogc3RyaW5nXG4gICAgY29tcGFueV9uYW1lOiBzdHJpbmdcbiAgfSkgPT4gUHJvbWlzZTx2b2lkPlxuICBmb3Jnb3RQYXNzd29yZDogKGVtYWlsOiBzdHJpbmcsIHN1YmRvbWFpbjogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+XG4gIHJlc2V0UGFzc3dvcmQ6IChkYXRhOiB7XG4gICAgZW1haWw6IHN0cmluZ1xuICAgIHRva2VuOiBzdHJpbmdcbiAgICBwYXNzd29yZDogc3RyaW5nXG4gICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiBzdHJpbmdcbiAgICB0ZW5hbnRfc3ViZG9tYWluOiBzdHJpbmdcbiAgfSkgPT4gUHJvbWlzZTx2b2lkPlxuICBsb2dvdXQ6ICgpID0+IHZvaWRcbiAgc2V0VXNlcjogKHVzZXI6IFVzZXIpID0+IHZvaWRcbiAgc2V0VG9rZW46ICh0b2tlbjogc3RyaW5nKSA9PiB2b2lkXG4gIGNsZWFyRXJyb3I6ICgpID0+IHZvaWRcbiAgcmVmcmVzaFVzZXI6ICgpID0+IFByb21pc2U8dm9pZD5cbn1cblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSBjcmVhdGU8QXV0aFN0YXRlICYgQXV0aEFjdGlvbnM+KCkoXG4gIHBlcnNpc3QoXG4gICAgKHNldCwgZ2V0KSA9PiAoe1xuICAgICAgLy8gRXN0YWRvIGluaWNpYWxcbiAgICAgIHVzZXI6IG51bGwsXG4gICAgICB0b2tlbjogbnVsbCxcbiAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6IG51bGwsXG5cbiAgICAgIC8vIEHDp8O1ZXNcbiAgICAgIGxvZ2luOiBhc3luYyAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgc3ViZG9tYWluOiBzdHJpbmcpID0+IHtcbiAgY29uc29sZS5sb2coJ/CflJAgQXV0aDogSW5pY2lhbmRvIHByb2Nlc3NvIGRlIGxvZ2luLi4uJywgeyBlbWFpbCwgc3ViZG9tYWluIH0pXG4gIHNldCh7IGlzTG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSlcblxuICB0cnkge1xuICAgIC8vIFZlcmlmaWNhciBzZSDDqSBsb2dpbiBkZSBkZW1vbnN0cmHDp8Ojb1xuICAgIGlmIChlbWFpbCA9PT0gJ2FkbWluQGRlbW8uY29tJyAmJiBwYXNzd29yZCA9PT0gJ3Bhc3N3b3JkJyAmJiBzdWJkb21haW4gPT09ICdkZW1vJykge1xuICAgICAgY29uc29sZS5sb2coJ/Cfjq0gQXV0aDogRGV0ZWN0YWRvIGxvZ2luIGRlIGRlbW9uc3RyYcOnw6NvJylcblxuICAgICAgLy8gUHJvY2Vzc2FyIGxvZ2luIGRlIGRlbW9uc3RyYcOnw6NvXG4gICAgICBjb25zdCBkZW1vVXNlckRhdGEgPSB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBuYW1lOiAnQWRtaW5pc3RyYWRvciBEZW1vJyxcbiAgICAgICAgZW1haWw6ICdhZG1pbkBkZW1vLmNvbScsXG4gICAgICAgIHJvbGU6ICdhZG1pbicgYXMgY29uc3QsXG4gICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgdGVuYW50X2lkOiAxLFxuICAgICAgICB0ZW5hbnQ6IHtcbiAgICAgICAgICBpZDogMSxcbiAgICAgICAgICBuYW1lOiAnRW1wcmVzYSBEZW1vJyxcbiAgICAgICAgICBzdWJkb21haW46ICdkZW1vJyxcbiAgICAgICAgICBwbGFuOiAncHJlbWl1bScgYXMgY29uc3QsXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyBhcyBjb25zdFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkZW1vX3VzZXInLCBKU09OLnN0cmluZ2lmeShkZW1vVXNlckRhdGEpKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RlbW9fdG9rZW4nLCAnZGVtb190b2tlbl8xMjMnKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RlbW9fc3ViZG9tYWluJywgJ2RlbW8nKVxuXG4gICAgICBDb29raWVzLnNldCgnYXV0aF90b2tlbicsICdkZW1vX3Rva2VuXzEyMycsIHsgZXhwaXJlczogNyB9KVxuICAgICAgQ29va2llcy5zZXQoJ3RlbmFudF9zdWJkb21haW4nLCAnZGVtbycsIHsgZXhwaXJlczogNyB9KVxuXG4gICAgICBzZXQoe1xuICAgICAgICB1c2VyOiBkZW1vVXNlckRhdGEsXG4gICAgICAgIHRva2VuOiAnZGVtb190b2tlbl8xMjMnLFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBMb2dpbiBkZSBkZW1vbnN0cmHDp8OjbyByZWFsaXphZG8gY29tIHN1Y2Vzc28nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8g8J+UpSBTRVQgU1VCRE9NQUlOIENPT0tJRSBCRUZPUkUgQVBJIENBTExcbiAgICBjb25zb2xlLmxvZygn8J+MkCBBdXRoOiBEZWZpbmluZG8gc3ViZG9tYWluIGFudGVzIGRhIHJlcXVpc2nDp8Ojby4uLicpXG4gICAgQ29va2llcy5zZXQoJ3RlbmFudF9zdWJkb21haW4nLCBzdWJkb21haW4sIHsgZXhwaXJlczogNyB9KVxuICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogU3ViZG9tYWluIGRlZmluaWRvOicsIHN1YmRvbWFpbilcblxuICAgIC8vIFRlbnRhciBsb2dpbiByZWFsIGNvbSBBUEkgZG8gU2FhU1xuICAgIGNvbnNvbGUubG9nKCfwn4yQIEF1dGg6IFRlbnRhbmRvIGxvZ2luIHJlYWwgY29tIEFQSSBkbyBTYWFTLi4uJylcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFwaVBvc3Q8e1xuICAgICAgICBhY2Nlc3NfdG9rZW46IHN0cmluZ1xuICAgICAgICB0b2tlbl90eXBlOiBzdHJpbmdcbiAgICAgICAgZXhwaXJlc19pbjogbnVtYmVyXG4gICAgICAgIHVzZXI6IEFwaVVzZXJSZXNwb25zZVxuICAgICAgfT4oJy90ZW5hbnQvbG9naW4nLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgLy8g4p2MIFJFTU9WRUQgdGVuYW50X3N1YmRvbWFpbiBmcm9tIGJvZHkgLSBub3cgc2VudCB2aWEgaGVhZGVyXG4gICAgICB9KVxuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEF1dGg6IExvZ2luIHJlYWwgcmVhbGl6YWRvIGNvbSBzdWNlc3NvIScpXG4gICAgICBjb25zb2xlLmxvZygn8J+TpiBBdXRoOiBEYWRvcyByZWNlYmlkb3M6Jywge1xuICAgICAgICB0b2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4gPyBgJHtkYXRhLmFjY2Vzc190b2tlbi5zdWJzdHJpbmcoMCwgMjApfS4uLmAgOiAnbnVsbCcsXG4gICAgICAgIHVzZXI6IGRhdGEudXNlciA/IHsgaWQ6IGRhdGEudXNlci5pZCwgZW1haWw6IGRhdGEudXNlci5lbWFpbCwgcm9sZTogZGF0YS51c2VyLnJvbGUgfSA6ICdudWxsJ1xuICAgICAgfSlcblxuICAgICAgLy8gUHJvY2Vzc2FyIGxvZ2luIHJlYWxcbiAgICAgIGxldCBtYXBwZWRVc2VyOiBVc2VyXG5cbiAgICAgIGlmIChkYXRhLnVzZXIgJiYgZGF0YS51c2VyLnRlbmFudCkge1xuICAgICAgICBtYXBwZWRVc2VyID0gZGF0YS51c2VyIGFzIFVzZXJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBVc3XDoXJpbyBjb20gdGVuYW50IGNvbXBsZXRvOicsIG1hcHBlZFVzZXIuZW1haWwpXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudXNlciAmJiBkYXRhLnVzZXIudGVuYW50X2lkKSB7XG4gICAgICAgIG1hcHBlZFVzZXIgPSB7XG4gICAgICAgICAgLi4uZGF0YS51c2VyLFxuICAgICAgICAgIHRlbmFudDoge1xuICAgICAgICAgICAgaWQ6IGRhdGEudXNlci50ZW5hbnRfaWQsXG4gICAgICAgICAgICBuYW1lOiAnRW1wcmVzYScsXG4gICAgICAgICAgICBzdWJkb21haW46IHN1YmRvbWFpbixcbiAgICAgICAgICAgIHBsYW46ICdiYXNpYycgYXMgY29uc3QsXG4gICAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnIGFzIGNvbnN0XG4gICAgICAgICAgfVxuICAgICAgICB9IGFzIFVzZXJcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBVc3XDoXJpbyBjb20gdGVuYW50X2lkLCBjcmlhZG8gdGVuYW50OicsIG1hcHBlZFVzZXIuZW1haWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXBwZWRVc2VyID0ge1xuICAgICAgICAgIC4uLmRhdGEudXNlcixcbiAgICAgICAgICB0ZW5hbnRfaWQ6IDEsXG4gICAgICAgICAgdGVuYW50OiB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIG5hbWU6ICdFbXByZXNhJyxcbiAgICAgICAgICAgIHN1YmRvbWFpbjogc3ViZG9tYWluLFxuICAgICAgICAgICAgcGxhbjogJ2Jhc2ljJyBhcyBjb25zdCxcbiAgICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScgYXMgY29uc3RcbiAgICAgICAgICB9XG4gICAgICAgIH0gYXMgVXNlclxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEF1dGg6IFVzdcOhcmlvIHNlbSB0ZW5hbnQsIGNyaWFkbyB0ZW5hbnQgcGFkcsOjbzonLCBtYXBwZWRVc2VyLmVtYWlsKVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+UkSBBdXRoOiBDb25maWd1cmFuZG8gY29va2llcy4uLicpXG4gICAgICBDb29raWVzLnNldCgnYXV0aF90b2tlbicsIGRhdGEuYWNjZXNzX3Rva2VuLCB7IGV4cGlyZXM6IDcgfSlcbiAgICAgIENvb2tpZXMuc2V0KCd0ZW5hbnRfc3ViZG9tYWluJywgc3ViZG9tYWluLCB7IGV4cGlyZXM6IDcgfSlcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogQ29va2llcyBjb25maWd1cmFkb3MnKVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+SviBBdXRoOiBDb25maWd1cmFuZG8gZXN0YWRvIGRvIFp1c3RhbmQuLi4nKVxuICAgICAgc2V0KHtcbiAgICAgICAgdXNlcjogbWFwcGVkVXNlcixcbiAgICAgICAgdG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSlcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogRXN0YWRvIGRvIFp1c3RhbmQgY29uZmlndXJhZG8nKVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBBdXRoOiBWZXJpZmljYW5kbyBlc3RhZG8gYXDDs3MgY29uZmlndXJhw6fDo28uLi4nKVxuICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gZ2V0KClcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OKIEF1dGg6IEVzdGFkbyBhdHVhbDonLCB7XG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogY3VycmVudFN0YXRlLmlzQXV0aGVudGljYXRlZCxcbiAgICAgICAgdXNlcjogY3VycmVudFN0YXRlLnVzZXI/LmVtYWlsLFxuICAgICAgICB0b2tlbjogY3VycmVudFN0YXRlLnRva2VuID8gYCR7Y3VycmVudFN0YXRlLnRva2VuLnN1YnN0cmluZygwLCAyMCl9Li4uYCA6ICdudWxsJ1xuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBMb2dpbiByZWFsIHByb2Nlc3NhZG8gY29tIHN1Y2Vzc28nKVxuICAgICAgcmV0dXJuXG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBBdXRoOiBBUEkgcmV0b3Jub3UgZXJybzonLCBlcnJvcilcblxuICAgICAgLy8gVmVyaWZpY2FyIHNlIMOpIGVycm8gZGUgdGVuYW50IG7Do28gZW5jb250cmFkb1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnVGVuYW50IG7Do28gZW5jb250cmFkbycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXN0ZSBzdWJkb23DrW5pbyBuw6NvIGVzdMOhIGNhZGFzdHJhZG8gbm8gc2lzdGVtYS4gRW50cmUgZW0gY29udGF0byBjb20gbyBhZG1pbmlzdHJhZG9yLicpXG4gICAgICB9XG5cbiAgICAgIC8vIFBhcmEgb3V0cm9zIGVycm9zLCB1c2FyIGZhbGxiYWNrIGFwZW5hcyBzZSBmb3IgZXJybyBkZSBzZXJ2aWRvclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzUwMCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ludGVybmFsIFNlcnZlciBFcnJvcicpKSkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+OrSBBdXRoOiBVc2FuZG8gZmFsbGJhY2sgcGFyYSBlcnJvIGRlIHNlcnZpZG9yLi4uJylcblxuICAgICAgICBjb25zdCBmYWxsYmFja1VzZXI6IFVzZXIgPSB7XG4gICAgICAgICAgaWQ6IERhdGUubm93KCksXG4gICAgICAgICAgbmFtZTogZW1haWwuc3BsaXQoJ0AnKVswXSxcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICByb2xlOiAnYWRtaW4nIGFzIGNvbnN0LFxuICAgICAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB0ZW5hbnRfaWQ6IDEsXG4gICAgICAgICAgdGVuYW50OiB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIG5hbWU6IGBFbXByZXNhICR7c3ViZG9tYWlufWAsXG4gICAgICAgICAgICBzdWJkb21haW4sXG4gICAgICAgICAgICBwbGFuOiAnYmFzaWMnIGFzIGNvbnN0LFxuICAgICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyBhcyBjb25zdFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrVG9rZW4gPSBgZmFsbGJhY2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZhbGxiYWNrX3VzZXInLCBKU09OLnN0cmluZ2lmeShmYWxsYmFja1VzZXIpKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmFsbGJhY2tfdG9rZW4nLCBmYWxsYmFja1Rva2VuKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmFsbGJhY2tfc3ViZG9tYWluJywgc3ViZG9tYWluKVxuXG4gICAgICAgIENvb2tpZXMuc2V0KCdhdXRoX3Rva2VuJywgZmFsbGJhY2tUb2tlbiwgeyBleHBpcmVzOiA3IH0pXG4gICAgICAgIENvb2tpZXMuc2V0KCd0ZW5hbnRfc3ViZG9tYWluJywgc3ViZG9tYWluLCB7IGV4cGlyZXM6IDcgfSlcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gZ2V0VGVuYW50U3ViZG9tYWluIGRlYnVnOicsIHtcbiAgICAgICAgaG9zdG5hbWU6IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgcGFydHM6IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5zcGxpdCgnLicpLFxuICAgICAgICBzdG9yZWRTdWJkb21haW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW5hbnRfc3ViZG9tYWluJyksXG4gICAgICAgIGVudlN1YmRvbWFpbjogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVEVOQU5UX1NVQkRPTUFJTlxuICAgICAgfSk7XG5cbiAgICAgICAgc2V0KHtcbiAgICAgICAgICB1c2VyOiBmYWxsYmFja1VzZXIsXG4gICAgICAgICAgdG9rZW46IGZhbGxiYWNrVG9rZW4sXG4gICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBMb2dpbiBjb20gZmFsbGJhY2sgcmVhbGl6YWRvIGNvbSBzdWNlc3NvJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIFBhcmEgb3V0cm9zIGVycm9zLCByZS10aHJvd1xuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQXV0aDogRXJybyBubyBwcm9jZXNzbyBkZSBsb2dpbjonLCBlcnJvcilcblxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRXJybyBkZXNjb25oZWNpZG8gbm8gbG9naW4nXG5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JcbiAgICB9IGVsc2UgaWYgKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ21lc3NhZ2UnIGluIGVycm9yKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBTdHJpbmcoZXJyb3IubWVzc2FnZSlcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCc1MDAnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ludGVybmFsIFNlcnZlciBFcnJvcicpKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSAnU2Vydmlkb3IgdGVtcG9yYXJpYW1lbnRlIGluZGlzcG9uw612ZWwuIFRlbnRlIG5vdmFtZW50ZSBlbSBhbGd1bnMgbWludXRvcy4nXG4gICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJzQwMScpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnVW5hdXRob3JpemVkJykpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9ICdDcmVkZW5jaWFpcyBpbnbDoWxpZGFzLiBWZXJpZmlxdWUgc2V1IGVtYWlsLCBzZW5oYSBlIHN1YmRvbcOtbmlvLidcbiAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNDAzJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGb3JiaWRkZW4nKSkge1xuICAgICAgZXJyb3JNZXNzYWdlID0gJ0FjZXNzbyBuZWdhZG8uIFZlcmlmaXF1ZSBzdWFzIHBlcm1pc3PDtWVzLidcbiAgICB9XG5cbiAgICBzZXQoe1xuICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgfSlcblxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpXG4gIH1cbn0sXG4gICAgICBcblxuICAgICAgbG9nb3V0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5qqIEF1dGg6IEZhemVuZG8gbG9nb3V0Li4uJylcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRlbnRhciBmYXplciBsb2dvdXQgbmEgQVBJIHNlIG7Do28gZXN0aXZlciBlbSBtb2RvIGRlbW9cbiAgICAgICAgICBjb25zdCB0b2tlbiA9IGdldCgpLnRva2VuXG4gICAgICAgICAgaWYgKHRva2VuICYmIHRva2VuICE9PSAnZGVtb190b2tlbl8xMjMnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+MkCBBdXRoOiBUZW50YW5kbyBsb2dvdXQgbmEgQVBJLi4uJylcbiAgICAgICAgICAgIGF3YWl0IGFwaUxvZ291dCgpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEF1dGg6IExvZ291dCBuYSBBUEkgcmVhbGl6YWRvIGNvbSBzdWNlc3NvJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfjq0gQXV0aDogTW9kbyBkZW1vLCBwdWxhbmRvIGxvZ291dCBuYSBBUEknKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBBdXRoOiBFcnJvIG5vIGxvZ291dCBkYSBBUEksIGNvbnRpbnVhbmRvIGNvbSBsb2dvdXQgbG9jYWw6JywgZXJyb3IpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmVyIGNvb2tpZXNcbiAgICAgICAgQ29va2llcy5yZW1vdmUoJ2F1dGhfdG9rZW4nKVxuICAgICAgICBDb29raWVzLnJlbW92ZSgndGVuYW50X3N1YmRvbWFpbicpXG5cbiAgICAgICAgLy8gTGltcGFyIGxvY2FsU3RvcmFnZSBkZSBkZW1vbnN0cmHDp8Ojb1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVtb191c2VyJylcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlbW9fdG9rZW4nKVxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVtb19zdWJkb21haW4nKVxuXG4gICAgICAgIC8vIExpbXBhciBlc3RhZG9cbiAgICAgICAgc2V0KHtcbiAgICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICAgIHRva2VuOiBudWxsLFxuICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBMb2dvdXQgcmVhbGl6YWRvIGNvbSBzdWNlc3NvJylcbiAgICAgIH0sXG5cbiAgICAgIHNldFVzZXI6ICh1c2VyOiBVc2VyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5GkIEF1dGg6IERlZmluaW5kbyB1c3XDoXJpbzonLCB1c2VyLmVtYWlsKVxuICAgICAgICBzZXQoeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUgfSlcbiAgICAgIH0sXG5cbiAgICAgIHNldFRva2VuOiAodG9rZW46IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UkSBBdXRoOiBEZWZpbmluZG8gdG9rZW4nKVxuICAgICAgICBzZXQoeyB0b2tlbiB9KVxuICAgICAgICBDb29raWVzLnNldCgnYXV0aF90b2tlbicsIHRva2VuLCB7IGV4cGlyZXM6IDcgfSlcbiAgICAgIH0sXG5cbiAgICAgIGNsZWFyRXJyb3I6ICgpID0+IHtcbiAgICAgICAgc2V0KHsgZXJyb3I6IG51bGwgfSlcbiAgICAgIH0sXG5cbiAgICAgIHJlZnJlc2hVc2VyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGdldCgpXG5cbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYXBpR2V0PHsgdXNlcjogVXNlciB9PignL3RlbmFudC9tZScpXG4gICAgICAgICAgc2V0KHsgdXNlcjogZGF0YS51c2VyIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBhdHVhbGl6YXIgdXN1w6FyaW86JywgZXJyb3IpXG4gICAgICAgICAgLy8gU2UgZGVyIGVycm8gNDAxLCBmYXplciBsb2dvdXRcbiAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCc0MDEnKSkge1xuICAgICAgICAgICAgZ2V0KCkubG9nb3V0KClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8vIOKchSBOT1ZPOiBGdW7Dp8O1ZXMgYXV4aWxpYXJlcyBwYXJhIGxvZ2luIGjDrWJyaWRvXG4gICAgICBoYW5kbGVEZW1vTG9naW46IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjq0gQXV0aDogUHJvY2Vzc2FuZG8gbG9naW4gZGUgZGVtb25zdHJhw6fDo28uLi4nKVxuXG4gICAgICAgIC8vIFZlcmlmaWNhciBzZSBow6EgZGFkb3MgZGUgZGVtb25zdHJhw6fDo28gbm8gbG9jYWxTdG9yYWdlXG4gICAgICAgIGNvbnN0IGRlbW9Vc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RlbW9fdXNlcicpXG4gICAgICAgIGNvbnN0IGRlbW9Ub2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZW1vX3Rva2VuJylcbiAgICAgICAgY29uc3QgZGVtb1N1YmRvbWFpbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZW1vX3N1YmRvbWFpbicpXG5cbiAgICAgICAgaWYgKGRlbW9Vc2VyICYmIGRlbW9Ub2tlbiAmJiBkZW1vU3ViZG9tYWluKSB7XG4gICAgICAgICAgLy8gVXNhciBkYWRvcyBkZSBkZW1vbnN0cmHDp8OjbyBleGlzdGVudGVzXG4gICAgICAgICAgY29uc3QgdXNlciA9IEpTT04ucGFyc2UoZGVtb1VzZXIpXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkaQgQXV0aDogVXN1w6FyaW8gZGUgZGVtb25zdHJhw6fDo28gY2FycmVnYWRvOicsIHVzZXIpXG5cbiAgICAgICAgICAvLyBTYWx2YXIgdG9rZW4gbm9zIGNvb2tpZXNcbiAgICAgICAgICBDb29raWVzLnNldCgnYXV0aF90b2tlbicsIGRlbW9Ub2tlbiwgeyBleHBpcmVzOiA3IH0pXG4gICAgICAgICAgQ29va2llcy5zZXQoJ3RlbmFudF9zdWJkb21haW4nLCBkZW1vU3ViZG9tYWluLCB7IGV4cGlyZXM6IDcgfSlcblxuICAgICAgICAgIHNldCh7XG4gICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgdG9rZW46IGRlbW9Ub2tlbixcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBMb2dpbiBkZSBkZW1vbnN0cmHDp8OjbyByZWFsaXphZG8gY29tIHN1Y2Vzc28nKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JpYXIgZGFkb3MgZGUgZGVtb25zdHJhw6fDo29cbiAgICAgICAgY29uc3QgZGVtb1VzZXJEYXRhID0ge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIG5hbWU6ICdBZG1pbmlzdHJhZG9yIERlbW8nLFxuICAgICAgICAgIGVtYWlsOiAnYWRtaW5AZGVtby5jb20nLFxuICAgICAgICAgIHJvbGU6ICdhZG1pbicgYXMgY29uc3QsXG4gICAgICAgICAgaXNfYWN0aXZlOiB0cnVlLFxuICAgICAgICAgIHRlbmFudF9pZDogMSxcbiAgICAgICAgICB0ZW5hbnQ6IHtcbiAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgbmFtZTogJ0VtcHJlc2EgRGVtbycsXG4gICAgICAgICAgICBzdWJkb21haW46ICdkZW1vJyxcbiAgICAgICAgICAgIHBsYW46ICdwcmVtaXVtJyBhcyBjb25zdCxcbiAgICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScgYXMgY29uc3RcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGVtb191c2VyJywgSlNPTi5zdHJpbmdpZnkoZGVtb1VzZXJEYXRhKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RlbW9fdG9rZW4nLCAnZGVtb190b2tlbl8xMjMnKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGVtb19zdWJkb21haW4nLCAnZGVtbycpXG5cbiAgICAgICAgLy8gU2FsdmFyIHRva2VuIG5vcyBjb29raWVzXG4gICAgICAgIENvb2tpZXMuc2V0KCdhdXRoX3Rva2VuJywgJ2RlbW9fdG9rZW5fMTIzJywgeyBleHBpcmVzOiA3IH0pXG4gICAgICAgIENvb2tpZXMuc2V0KCd0ZW5hbnRfc3ViZG9tYWluJywgJ2RlbW8nLCB7IGV4cGlyZXM6IDcgfSlcblxuICAgICAgICBzZXQoe1xuICAgICAgICAgIHVzZXI6IGRlbW9Vc2VyRGF0YSxcbiAgICAgICAgICB0b2tlbjogJ2RlbW9fdG9rZW5fMTIzJyxcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEF1dGg6IERhZG9zIGRlIGRlbW9uc3RyYcOnw6NvIGNyaWFkb3MgZSBsb2dpbiByZWFsaXphZG8nKVxuICAgICAgfSxcblxuICAgICAgaGFuZGxlUmVhbExvZ2luOiBhc3luYyAoZGF0YTogeyB1c2VyOiBBcGlVc2VyUmVzcG9uc2U7IGFjY2Vzc190b2tlbjogc3RyaW5nIH0sIHN1YmRvbWFpbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn4yQIEF1dGg6IFByb2Nlc3NhbmRvIGxvZ2luIHJlYWwuLi4nKVxuXG4gICAgICAgIC8vIE1hcGVhciBlIHZhbGlkYXIgbyB1c3XDoXJpbyByZWNlYmlkb1xuICAgICAgICBsZXQgbWFwcGVkVXNlcjogVXNlclxuXG4gICAgICAgIGlmIChkYXRhLnVzZXIgJiYgZGF0YS51c2VyLnRlbmFudCkge1xuICAgICAgICAgIG1hcHBlZFVzZXIgPSBkYXRhLnVzZXIgYXMgVXNlclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogVXN1w6FyaW8gY29tIHRlbmFudCBjb21wbGV0byByZWNlYmlkbycpXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS51c2VyICYmIGRhdGEudXNlci50ZW5hbnRfaWQpIHtcbiAgICAgICAgICBtYXBwZWRVc2VyID0ge1xuICAgICAgICAgICAgLi4uZGF0YS51c2VyLFxuICAgICAgICAgICAgdGVuYW50OiB7XG4gICAgICAgICAgICAgIGlkOiBkYXRhLnVzZXIudGVuYW50X2lkLFxuICAgICAgICAgICAgICBuYW1lOiAnRW1wcmVzYScsXG4gICAgICAgICAgICAgIHN1YmRvbWFpbjogc3ViZG9tYWluLFxuICAgICAgICAgICAgICBwbGFuOiAnYmFzaWMnIGFzIGNvbnN0LFxuICAgICAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnIGFzIGNvbnN0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBhcyBVc2VyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFwcGVkVXNlciA9IHtcbiAgICAgICAgICAgIC4uLmRhdGEudXNlcixcbiAgICAgICAgICAgIHRlbmFudF9pZDogMSxcbiAgICAgICAgICAgIHRlbmFudDoge1xuICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgbmFtZTogJ0VtcHJlc2EnLFxuICAgICAgICAgICAgICBzdWJkb21haW46IHN1YmRvbWFpbixcbiAgICAgICAgICAgICAgcGxhbjogJ2Jhc2ljJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyBhcyBjb25zdFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gYXMgVXNlclxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2FsdmFyIHRva2VuIG5vcyBjb29raWVzXG4gICAgICAgIENvb2tpZXMuc2V0KCdhdXRoX3Rva2VuJywgZGF0YS5hY2Nlc3NfdG9rZW4sIHsgZXhwaXJlczogNyB9KVxuICAgICAgICBDb29raWVzLnNldCgndGVuYW50X3N1YmRvbWFpbicsIHN1YmRvbWFpbiwgeyBleHBpcmVzOiA3IH0pXG5cbiAgICAgICAgc2V0KHtcbiAgICAgICAgICB1c2VyOiBtYXBwZWRVc2VyLFxuICAgICAgICAgIHRva2VuOiBkYXRhLmFjY2Vzc190b2tlbixcbiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEF1dGg6IExvZ2luIHJlYWwgcHJvY2Vzc2FkbyBjb20gc3VjZXNzbycpXG4gICAgICB9LFxuXG4gICAgICBoYW5kbGVGYWxsYmFja0xvZ2luOiBhc3luYyAoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgc3ViZG9tYWluOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjq0gQXV0aDogUHJvY2Vzc2FuZG8gbG9naW4gY29tIGZhbGxiYWNrLi4uJylcblxuICAgICAgICAvLyBDcmlhciB1c3XDoXJpbyB0ZW1wb3LDoXJpbyBwYXJhIGZhbGxiYWNrXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrVXNlcjogVXNlciA9IHtcbiAgICAgICAgICBpZDogRGF0ZS5ub3coKSwgLy8gSUQgw7puaWNvIGJhc2VhZG8gbm8gdGltZXN0YW1wXG4gICAgICAgICAgbmFtZTogZW1haWwuc3BsaXQoJ0AnKVswXSwgLy8gTm9tZSBiYXNlYWRvIG5vIGVtYWlsXG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgcm9sZTogJ2FkbWluJyBhcyBjb25zdCxcbiAgICAgICAgICBpc19hY3RpdmU6IHRydWUsXG4gICAgICAgICAgdGVuYW50X2lkOiAxLFxuICAgICAgICAgIHRlbmFudDoge1xuICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICBuYW1lOiBgRW1wcmVzYSAke3N1YmRvbWFpbn1gLFxuICAgICAgICAgICAgc3ViZG9tYWluLFxuICAgICAgICAgICAgcGxhbjogJ2Jhc2ljJyBhcyBjb25zdCxcbiAgICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScgYXMgY29uc3RcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXJhciB0b2tlbiB0ZW1wb3LDoXJpb1xuICAgICAgICBjb25zdCBmYWxsYmFja1Rva2VuID0gYGZhbGxiYWNrXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuXG4gICAgICAgIC8vIFNhbHZhciBkYWRvcyBubyBsb2NhbFN0b3JhZ2UgcGFyYSBwZXJzaXN0w6puY2lhXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYWxsYmFja191c2VyJywgSlNPTi5zdHJpbmdpZnkoZmFsbGJhY2tVc2VyKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZhbGxiYWNrX3Rva2VuJywgZmFsbGJhY2tUb2tlbilcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2ZhbGxiYWNrX3N1YmRvbWFpbicsIHN1YmRvbWFpbilcblxuICAgICAgICAvLyBTYWx2YXIgdG9rZW4gbm9zIGNvb2tpZXNcbiAgICAgICAgQ29va2llcy5zZXQoJ2F1dGhfdG9rZW4nLCBmYWxsYmFja1Rva2VuLCB7IGV4cGlyZXM6IDcgfSlcbiAgICAgICAgQ29va2llcy5zZXQoJ3RlbmFudF9zdWJkb21haW4nLCBzdWJkb21haW4sIHsgZXhwaXJlczogNyB9KVxuXG4gICAgICAgIHNldCh7XG4gICAgICAgICAgdXNlcjogZmFsbGJhY2tVc2VyLFxuICAgICAgICAgIHRva2VuOiBmYWxsYmFja1Rva2VuLFxuICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogTG9naW4gY29tIGZhbGxiYWNrIHJlYWxpemFkbyBjb20gc3VjZXNzbycpXG4gICAgICB9LFxuXG4gICAgICBoYW5kbGVMb2dpbkVycm9yOiBhc3luYyAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEF1dGg6IFByb2Nlc3NhbmRvIGVycm8gZGUgbG9naW46JywgZXJyb3IpXG5cbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdFcnJvIGRlc2NvbmhlY2lkbyBubyBsb2dpbidcblxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdtZXNzYWdlJyBpbiBlcnJvcikge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFN0cmluZyhlcnJvci5tZXNzYWdlKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWVuc2FnZW5zIG1haXMgYW1pZ8OhdmVpcyBwYXJhIGVycm9zIGNvbXVuc1xuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCc1MDAnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ludGVybmFsIFNlcnZlciBFcnJvcicpKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1NlcnZpZG9yIHRlbXBvcmFyaWFtZW50ZSBpbmRpc3BvbsOtdmVsLiBUZW50ZSBub3ZhbWVudGUgZW0gYWxndW5zIG1pbnV0b3MuJ1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnNDAxJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdVbmF1dGhvcml6ZWQnKSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdDcmVkZW5jaWFpcyBpbnbDoWxpZGFzLiBWZXJpZmlxdWUgc2V1IGVtYWlsLCBzZW5oYSBlIHN1YmRvbcOtbmlvLidcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJzQwMycpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRm9yYmlkZGVuJykpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnQWNlc3NvIG5lZ2Fkby4gVmVyaWZpcXVlIHN1YXMgcGVybWlzc8O1ZXMuJ1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0KHtcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSlcbiAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIOKchSBOT1ZPOiBGdW7Dp8OjbyBwYXJhIHJlZ2lzdHJvIGRlIHRlbmFudFxuICAgICAgcmVnaXN0ZXI6IGFzeW5jIChkYXRhOiB7XG4gICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICBlbWFpbDogc3RyaW5nXG4gICAgICAgIHBhc3N3b3JkOiBzdHJpbmdcbiAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiBzdHJpbmdcbiAgICAgICAgdGVuYW50X3N1YmRvbWFpbjogc3RyaW5nXG4gICAgICAgIGNvbXBhbnlfbmFtZTogc3RyaW5nXG4gICAgICB9KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIEF1dGg6IEluaWNpYW5kbyByZWdpc3RybyBkZSB0ZW5hbnQuLi4nLCB7IGVtYWlsOiBkYXRhLmVtYWlsLCBzdWJkb21haW46IGRhdGEudGVuYW50X3N1YmRvbWFpbiB9KVxuICAgICAgICBzZXQoeyBpc0xvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBhcGlUZW5hbnRSZWdpc3RlcihkYXRhKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogUmVnaXN0cm8gcmVhbGl6YWRvIGNvbSBzdWNlc3NvIScpXG5cbiAgICAgICAgICBzZXQoe1xuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEF1dGg6IEVycm8gbm8gcmVnaXN0cm86JywgZXJyb3IpXG4gICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdFcnJvIGRlc2NvbmhlY2lkbyBubyByZWdpc3RybydcblxuICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0KHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAgICAgICAvLyDinIUgTk9WTzogRnVuw6fDo28gcGFyYSBlc3F1ZWNpIG1pbmhhIHNlbmhhXG4gICAgICBmb3Jnb3RQYXNzd29yZDogYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHN1YmRvbWFpbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SRIEF1dGg6IEluaWNpYW5kbyBzb2xpY2l0YcOnw6NvIGRlIHJlc2V0IGRlIHNlbmhhLi4uJywgeyBlbWFpbCwgc3ViZG9tYWluIH0pXG4gICAgICAgIHNldCh7IGlzTG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSlcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGFwaUZvcmdvdFBhc3N3b3JkKHsgZW1haWwsIHRlbmFudF9zdWJkb21haW46IHN1YmRvbWFpbiB9KVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogU29saWNpdGHDp8OjbyBkZSByZXNldCBlbnZpYWRhIGNvbSBzdWNlc3NvIScpXG5cbiAgICAgICAgICBzZXQoe1xuICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEF1dGg6IEVycm8gYW8gc29saWNpdGFyIHJlc2V0IGRlIHNlbmhhOicsIGVycm9yKVxuICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRXJybyBkZXNjb25oZWNpZG8gYW8gc29saWNpdGFyIHJlc2V0IGRlIHNlbmhhJ1xuXG4gICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXQoe1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIOKchSBOT1ZPOiBGdW7Dp8OjbyBwYXJhIHJlc2V0YXIgc2VuaGFcbiAgICAgIHJlc2V0UGFzc3dvcmQ6IGFzeW5jIChkYXRhOiB7XG4gICAgICAgIGVtYWlsOiBzdHJpbmdcbiAgICAgICAgdG9rZW46IHN0cmluZ1xuICAgICAgICBwYXNzd29yZDogc3RyaW5nXG4gICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogc3RyaW5nXG4gICAgICAgIHRlbmFudF9zdWJkb21haW46IHN0cmluZ1xuICAgICAgfSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UkSBBdXRoOiBJbmljaWFuZG8gcmVzZXQgZGUgc2VuaGEuLi4nLCB7IGVtYWlsOiBkYXRhLmVtYWlsLCBzdWJkb21haW46IGRhdGEudGVuYW50X3N1YmRvbWFpbiB9KVxuICAgICAgICBzZXQoeyBpc0xvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBhcGlSZXNldFBhc3N3b3JkKGRhdGEpXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBBdXRoOiBTZW5oYSByZXNldGFkYSBjb20gc3VjZXNzbyEnKVxuXG4gICAgICAgICAgc2V0KHtcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBBdXRoOiBFcnJvIGFvIHJlc2V0YXIgc2VuaGE6JywgZXJyb3IpXG4gICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdFcnJvIGRlc2NvbmhlY2lkbyBhbyByZXNldGFyIHNlbmhhJ1xuXG4gICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXQoe1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gICAge1xuICAgICAgbmFtZTogJ2F1dGgtc3RvcmFnZScsXG4gICAgICBwYXJ0aWFsaXplOiAoc3RhdGUpID0+ICh7XG4gICAgICAgIHVzZXI6IHN0YXRlLnVzZXIsXG4gICAgICAgIHRva2VuOiBzdGF0ZS50b2tlbixcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQsXG4gICAgICB9KSxcbiAgICAgIC8vIEFkaWNpb25hciByZWh5ZHJhdGUgcGFyYSBnYXJhbnRpciBxdWUgbyBlc3RhZG8gc2VqYSByZXN0YXVyYWRvXG4gICAgICBvblJlaHlkcmF0ZVN0b3JhZ2U6ICgpID0+IChzdGF0ZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBBdXRoOiBFc3RhZG8gcmVoeWRyYXRhZG86Jywgc3RhdGUpXG4gICAgICB9LFxuICAgIH1cbiAgKVxuKVxuXG4vLyBGdW7Dp8OjbyBwYXJhIG9idGVyIG8gdG9rZW4gYXR1YWxcbmV4cG9ydCBjb25zdCBnZXRBdXRoVG9rZW4gPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGw7XG4gIFxuICB0cnkge1xuICAgIC8vIFRyeSBkaXJlY3QgdG9rZW5cbiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7XG4gICAgaWYgKHRva2VuKSByZXR1cm4gdG9rZW47XG4gICAgXG4gICAgLy8gVHJ5IGF1dGgtc3RvcmFnZSAoenVzdGFuZClcbiAgICBjb25zdCBhdXRoU3RvcmFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoLXN0b3JhZ2UnKTtcbiAgICBpZiAoYXV0aFN0b3JhZ2UpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoYXV0aFN0b3JhZ2UpO1xuICAgICAgaWYgKHBhcnNlZD8uc3RhdGU/LnRva2VuKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWQuc3RhdGUudG9rZW47XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFRyeSBjb29raWVcbiAgICBjb25zdCBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgZm9yIChjb25zdCBjb29raWUgb2YgY29va2llcykge1xuICAgICAgY29uc3QgW25hbWUsIHZhbHVlXSA9IGNvb2tpZS50cmltKCkuc3BsaXQoJz0nKTtcbiAgICAgIGlmIChuYW1lID09PSAnYXV0aF90b2tlbicpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2Fybign4pqg77iPIGdldEF1dGhUb2tlbjogRXJyb3I6JywgZSk7XG4gIH1cbiAgXG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gRnVuw6fDo28gcGFyYSBvYnRlciBvIHN1YmRvbWFpbiBhdHVhbFxuZXhwb3J0IGNvbnN0IGdldFRlbmFudFN1YmRvbWFpbiA9ICgpOiBzdHJpbmcgPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyAxLiBUcnkgVVJMIGV4dHJhY3Rpb24gZmlyc3RcbiAgICBjb25zdCBob3N0bmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICBjb25zdCBwYXJ0cyA9IGhvc3RuYW1lLnNwbGl0KCcuJyk7XG4gICAgXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgICBjb25zdCBzdWJkb21haW4gPSBwYXJ0c1swXTtcbiAgICAgIGlmICghWyd3d3cnLCAnYXBpJywgJ2FkbWluJywgJ2xvY2FsaG9zdCddLmluY2x1ZGVzKHN1YmRvbWFpbikpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfjJAgZ2V0VGVuYW50U3ViZG9tYWluOiBFeHRyYWN0ZWQgZnJvbSBVUkw6Jywgc3ViZG9tYWluKTtcbiAgICAgICAgcmV0dXJuIHN1YmRvbWFpbjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gMi4gVHJ5IENvb2tpZSAodXNpbmcganMtY29va2llKSDihpAgVEhJUyBXQVMgTUlTU0lORyFcbiAgICBjb25zdCBjb29raWVTdWJkb21haW4gPSBDb29raWVzLmdldCgndGVuYW50X3N1YmRvbWFpbicpO1xuICAgIGlmIChjb29raWVTdWJkb21haW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn42qIGdldFRlbmFudFN1YmRvbWFpbjogRnJvbSBjb29raWU6JywgY29va2llU3ViZG9tYWluKTtcbiAgICAgIHJldHVybiBjb29raWVTdWJkb21haW47XG4gICAgfVxuICAgIFxuICAgIC8vIDMuIFRyeSBsb2NhbFN0b3JhZ2UgZmFsbGJhY2tcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RvcmVkU3ViZG9tYWluID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RlbmFudF9zdWJkb21haW4nKTtcbiAgICAgIGlmIChzdG9yZWRTdWJkb21haW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfkr4gZ2V0VGVuYW50U3ViZG9tYWluOiBGcm9tIGxvY2FsU3RvcmFnZTonLCBzdG9yZWRTdWJkb21haW4pO1xuICAgICAgICByZXR1cm4gc3RvcmVkU3ViZG9tYWluO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIGdldFRlbmFudFN1YmRvbWFpbjogRXJyb3I6JywgZSk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVEVOQU5UX1NVQkRPTUFJTiB8fCAnJztcbn07XG5cblxuXG4vLyBGdW7Dp8OjbyBwYXJhIGluaWNpYWxpemFyIG8gZXN0YWRvIGRlIGF1dGVudGljYcOnw6NvIGEgcGFydGlyIGRvcyBjb29raWVzXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZUF1dGhGcm9tQ29va2llcyA9ICgpID0+IHtcbiAgY29uc3QgdG9rZW4gPSBnZXRBdXRoVG9rZW4oKVxuICBjb25zdCBzdWJkb21haW4gPSBnZXRUZW5hbnRTdWJkb21haW4oKVxuXG4gIGNvbnNvbGUubG9nKCfwn5SNIEF1dGg6IEluaWNpYWxpemFuZG8gYSBwYXJ0aXIgZG9zIGNvb2tpZXM6Jywge1xuICAgIHRva2VuOiB0b2tlbiA/IGAke3Rva2VuLnN1YnN0cmluZygwLCAyMCl9Li4uYCA6ICdudWxsJyxcbiAgICBzdWJkb21haW4sXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfSlcblxuICBpZiAodG9rZW4gJiYgc3ViZG9tYWluKSB7XG4gICAgLy8gVmVyaWZpY2FyIHNlIMOpIHRva2VuIGRlIGRlbW9uc3RyYcOnw6NvXG4gICAgaWYgKHRva2VuID09PSAnZGVtb190b2tlbl8xMjMnKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+OrSBBdXRoOiBUb2tlbiBkZSBkZW1vbnN0cmHDp8OjbyBkZXRlY3RhZG8nKVxuICAgICAgY29uc3QgZGVtb1VzZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVtb191c2VyJylcbiAgICAgIGlmIChkZW1vVXNlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVzZXIgPSBKU09OLnBhcnNlKGRlbW9Vc2VyKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn46tIEF1dGg6IFJlc3RhdXJhbmRvIHVzdcOhcmlvIGRlIGRlbW9uc3RyYcOnw6NvOicsIHVzZXIuZW1haWwpXG5cbiAgICAgICAgICAvLyBVc2FyIHNldFN0YXRlIGRpcmV0YW1lbnRlIHBhcmEgZXZpdGFyIHByb2JsZW1hcyBkZSB0aW1pbmdcbiAgICAgICAgICB1c2VBdXRoLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aDogVXN1w6FyaW8gZGUgZGVtb25zdHJhw6fDo28gcmVzdGF1cmFkbyBjb20gc3VjZXNzbycpXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQXV0aDogRXJybyBhbyBwYXJzZWFyIHVzdcOhcmlvIGRlIGRlbW9uc3RyYcOnw6NvOicsIGVycm9yKVxuICAgICAgICAgIC8vIExpbXBhciBkYWRvcyBjb3Jyb21waWRvc1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdkZW1vX3VzZXInKVxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdkZW1vX3Rva2VuJylcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVtb19zdWJkb21haW4nKVxuICAgICAgICAgIENvb2tpZXMucmVtb3ZlKCdhdXRoX3Rva2VuJylcbiAgICAgICAgICBDb29raWVzLnJlbW92ZSgndGVuYW50X3N1YmRvbWFpbicpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVG9rZW4gcmVhbCAtIHRlbnRhciBidXNjYXIgZGFkb3MgZG8gdXN1w6FyaW9cbiAgICAgIGNvbnNvbGUubG9nKCfwn4yQIEF1dGg6IFRva2VuIHJlYWwgZW5jb250cmFkbywgdGVudGFuZG8gYnVzY2FyIHVzdcOhcmlvLi4uJylcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEF1dGg6IFRva2VuIHJlYWw6JywgdG9rZW4uc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nKVxuICAgICAgY29uc29sZS5sb2coJ/CflI0gQXV0aDogU3ViZG9tYWluOicsIHN1YmRvbWFpbilcblxuICAgICAgLy8gVmVyaWZpY2FyIHNlIG8gdG9rZW4gZXN0w6Egbm8gZXN0YWRvIGRvIFp1c3RhbmRcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHVzZUF1dGguZ2V0U3RhdGUoKVxuICAgICAgY29uc29sZS5sb2coJ/Cfk4ogQXV0aDogRXN0YWRvIGF0dWFsIGRvIFp1c3RhbmQ6Jywge1xuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGN1cnJlbnRTdGF0ZS5pc0F1dGhlbnRpY2F0ZWQsXG4gICAgICAgIHVzZXI6IGN1cnJlbnRTdGF0ZS51c2VyPy5lbWFpbCxcbiAgICAgICAgdG9rZW46IGN1cnJlbnRTdGF0ZS50b2tlbiA/IGAke2N1cnJlbnRTdGF0ZS50b2tlbi5zdWJzdHJpbmcoMCwgMjApfS4uLmAgOiAnbnVsbCdcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlIGrDoSB0ZW1vcyB1c3XDoXJpbyBlIHRva2VuIG5vIGVzdGFkbywgY29uc2lkZXJhciBhdXRlbnRpY2Fkb1xuICAgICAgaWYgKGN1cnJlbnRTdGF0ZS51c2VyICYmIGN1cnJlbnRTdGF0ZS50b2tlbikge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEF1dGg6IFVzdcOhcmlvIGrDoSBlc3TDoSBubyBlc3RhZG8sIGNvbnNpZGVyYW5kbyBhdXRlbnRpY2FkbycpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIE7Do28gZmF6ZXIgcmVmcmVzaFVzZXIgYXF1aSBwYXJhIGV2aXRhciBsb29wc1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBBdXRoOiBVc3XDoXJpbyBuw6NvIGVuY29udHJhZG8gbm8gZXN0YWRvLCBtYXMgdG9rZW4gZXhpc3RlJylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ+KdjCBBdXRoOiBOZW5odW0gdG9rZW4gb3Ugc3ViZG9tYWluIGVuY29udHJhZG8nKVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLy8gRnVuw6fDo28gcGFyYSB2ZXJpZmljYXIgc2UgbyB1c3XDoXJpbyB0ZW0gcGVybWlzc8Ojb1xuZXhwb3J0IGNvbnN0IGhhc1Blcm1pc3Npb24gPSAocmVxdWlyZWRSb2xlczogc3RyaW5nW10pID0+IHtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoLmdldFN0YXRlKClcbiAgcmV0dXJuIHVzZXIgJiYgcmVxdWlyZWRSb2xlcy5pbmNsdWRlcyh1c2VyLnJvbGUpXG59XG5cbi8vIEZ1bsOnw6NvIHBhcmEgdmVyaWZpY2FyIHNlIMOpIGFkbWluXG5leHBvcnQgY29uc3QgaXNBZG1pbiA9ICgpID0+IHtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoLmdldFN0YXRlKClcbiAgcmV0dXJuIHVzZXI/LnJvbGUgPT09ICdhZG1pbidcbn1cblxuLy8gRnVuw6fDo28gcGFyYSB2ZXJpZmljYXIgc2Ugw6kgbWFuYWdlciBvdSBhZG1pblxuZXhwb3J0IGNvbnN0IGNhbk1hbmFnZSA9ICgpID0+IHtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoLmdldFN0YXRlKClcbiAgcmV0dXJuIHVzZXIgJiYgWydhZG1pbicsICdtYW5hZ2VyJ10uaW5jbHVkZXModXNlci5yb2xlKVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZSIsInBlcnNpc3QiLCJDb29raWVzIiwiYXBpUG9zdCIsImFwaUdldCIsImFwaUxvZ291dCIsImFwaVRlbmFudFJlZ2lzdGVyIiwiYXBpRm9yZ290UGFzc3dvcmQiLCJhcGlSZXNldFBhc3N3b3JkIiwidXNlQXV0aCIsInNldCIsImdldCIsInVzZXIiLCJ0b2tlbiIsImlzQXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsImVycm9yIiwibG9naW4iLCJlbWFpbCIsInBhc3N3b3JkIiwic3ViZG9tYWluIiwiY29uc29sZSIsImxvZyIsImRlbW9Vc2VyRGF0YSIsImlkIiwibmFtZSIsInJvbGUiLCJpc19hY3RpdmUiLCJ0ZW5hbnRfaWQiLCJ0ZW5hbnQiLCJwbGFuIiwic3RhdHVzIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJleHBpcmVzIiwiY3VycmVudFN0YXRlIiwiZGF0YSIsImFjY2Vzc190b2tlbiIsInN1YnN0cmluZyIsIm1hcHBlZFVzZXIiLCJFcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImZhbGxiYWNrVXNlciIsIkRhdGUiLCJub3ciLCJzcGxpdCIsImZhbGxiYWNrVG9rZW4iLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJob3N0bmFtZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGFydHMiLCJzdG9yZWRTdWJkb21haW4iLCJnZXRJdGVtIiwiZW52U3ViZG9tYWluIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1RFTkFOVF9TVUJET01BSU4iLCJlcnJvck1lc3NhZ2UiLCJTdHJpbmciLCJsb2dvdXQiLCJ3YXJuIiwicmVtb3ZlIiwicmVtb3ZlSXRlbSIsInNldFVzZXIiLCJzZXRUb2tlbiIsImNsZWFyRXJyb3IiLCJyZWZyZXNoVXNlciIsImhhbmRsZURlbW9Mb2dpbiIsImRlbW9Vc2VyIiwiZGVtb1Rva2VuIiwiZGVtb1N1YmRvbWFpbiIsInBhcnNlIiwiaGFuZGxlUmVhbExvZ2luIiwiaGFuZGxlRmFsbGJhY2tMb2dpbiIsImhhbmRsZUxvZ2luRXJyb3IiLCJyZWdpc3RlciIsInRlbmFudF9zdWJkb21haW4iLCJmb3Jnb3RQYXNzd29yZCIsInJlc2V0UGFzc3dvcmQiLCJwYXJ0aWFsaXplIiwic3RhdGUiLCJvblJlaHlkcmF0ZVN0b3JhZ2UiLCJnZXRBdXRoVG9rZW4iLCJhdXRoU3RvcmFnZSIsInBhcnNlZCIsImNvb2tpZXMiLCJkb2N1bWVudCIsImNvb2tpZSIsInZhbHVlIiwidHJpbSIsImUiLCJnZXRUZW5hbnRTdWJkb21haW4iLCJsZW5ndGgiLCJjb29raWVTdWJkb21haW4iLCJpbml0aWFsaXplQXV0aEZyb21Db29raWVzIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJzZXRTdGF0ZSIsImdldFN0YXRlIiwiaGFzUGVybWlzc2lvbiIsInJlcXVpcmVkUm9sZXMiLCJpc0FkbWluIiwiY2FuTWFuYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/auth.ts\n"));

/***/ })

});